- defaults:
    link:
      relink: true
    shell:
      stdout: true
      stdin: true

- create:
    - ~/.config/nvim

- link:
   # ~/.zshrc: zsh/zshrc
   # ~/.p10k.zsh: zsh/p10k.zsh
   ~/.config/nvim/init.vim: neovim/init.vim
   ~/.config/nvim/coc.vim: neovim/coc.vim
   ~/.config/nvim/coc-settings.json.vim: neovim/coc-settings.json

- shell:
  - [command -v zsh, Checking dependencies were installed using host package manager]
  - command -v pip3
  - command -v curl
  - command -v node
  - command -v yarn
  - command -v solargraph
    # Neovim binaries
  - rm -rf neovim/binaries
  - mkdir neovim/binaries
  - [wget https://github.com/neovim/neovim/releases/download/v0.4.3/nvim.appimage,
     Installing neovim binaries, update links as new releases come out]
  - chmod u+x nvim.appimage
  - mv nvim.appimage neovim/binaries/
  - cd neovim/binaries && ./nvim.appimage --appimage-extract
  - wget https://github.com/neovim/neovim/releases/download/v0.4.3/nvim-macos.tar.gz
  - mv nvim-macos.tar.gz neovim/binaries/
  - cd neovim/binaries && tar -xvzf nvim-macos.tar.gz
  - ./neovim/install_binaries.sh
    # Neovim remote
  # - [pip3 install --user neovim-remote, Install neovim-remote]
    # Zsh
  # - [/bin/zsh ~/.zshrc, Installing zsh plugins]
    # Install vim plugins
  # - [pip3 install --user neovim-remote, Install neovim-remote] Disable for now, this is complicated
  # - [/bin/zsh ~/.zshrc, Installing zsh plugins] Disable for now
  - [nvim +PlugInstall +qall, Installing neovim plugins]

